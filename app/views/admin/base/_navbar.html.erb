<nav class="navbar p-0 fixed-top d-flex flex-row flex-nowrap">
  <div class="navbar-brand-wrapper d-xs-none d-flex d-lg-none align-items-center justify-content-center">
    <%= link_to "#", class: "navbar-brand brand-logo-mini" do %>
      <span class="brand-name"><%= Settings.app_name[0] %></span>
    <% end %>
  </div>
  <div class="navbar-menu-wrapper flex-grow d-flex ms-auto">
    <button class="navbar-toggler navbar-toggler align-self-center" type="button" data-toggle="minimize">
      <span class="mdi mdi-menu"></span>
    </button>
    <ul class="navbar-nav navbar-nav-right">
      <li class="nav-item dropdown d-none d-lg-block">
        <%= render "dropdown_button", id: "createbtns",
                    button_class: "nav-link btn btn-success px-2" do %>
          <span class="fs-6"><b>+</b> <%= t("admin.misc.new") %></span>
        <% end %>
        <%= render "dropdown_menu", id: "createbtns", pos: :right,
                    menu_class: "navbar-dropdown" do %>
          <% get_new_buttons.each do |btn| %>
            <%= render("dropdown_item", link: btn[:link],
                       icon: btn[:icon], title: btn[:title]) unless
                       current_page?(btn[:link]) %>
          <% end %>
        <% end %>
      </li>
      <li class="nav-item dropdown border-left">
        <% langs = get_languages %>
        <% cur_locale = I18n.locale %>
        <% cur_lang = langs[cur_locale] %>
        <%= render "dropdown_button", id: "languages", button_class: "nav-link" do %>
          <%= tag.i class: "flag-icon flag-icon-#{cur_lang[:icon]}", title: cur_lang[:title] %>
        <% end %>
        <%= render "dropdown_menu", id: "languages", pos: :left,
                    menu_class: "navbar-dropdown" do %>
          <% langs.except(cur_locale).each do |locale, lang| %>
            <%= link_to url_for(locale:), class: "dropdown-item preview-item my-1 align-items-baseline" do %>
              <%= tag.i class: "flag-icon flag-icon-#{lang[:icon]} preview-thumbnail", title: lang[:title], id:"lang-#{lang[:icon]}" %>
              <%= tag.span lang[:title], class: "text-white preview-subject ms-3 fs-6" %>
            <% end %>
          <% end %>
        <% end %>
      </li>
      <li class="nav-item dropdown border-left">
        <%= render "dropdown_button", id: "messages",
                    button_class: "nav-link count-indicator" do %>
          <i class="mdi mdi-email"></i>
          <span class="count bg-success"></span>
        <% end %>
        <%= render "dropdown_menu", id: "messages", pos: :right, title: t(".messages"),
                    menu_class: "navbar-dropdown" do %>
        <% end %>
      </li>
      <li class="nav-item dropdown border-left">
        <%= render "dropdown_button", id: "notifications",
                    button_class: "nav-link count-indicator" do %>
          <i class="mdi mdi-bell"></i>
          <span class="count bg-danger"></span>
        <% end %>
        <%= render "dropdown_menu", id: "notifications", pos: :right, title: t(".notifications"),
                    menu_class: "navbar-dropdown" do %>
        <% end %>
      </li>
      <li class="nav-item dropdown">
        <%= render "navbar_profile" %>
      </li>
    </ul>
    <button class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
      <span class="mdi mdi-format-line-spacing"></span>
    </button>
  </div>
</nav>
